@model DocumentEntity

@switch (Model.Status)
{
    case DocumentStatus.Completed:
        var tooltipParts = new List<string>();
        if (Model.SegmentCount > 0) tooltipParts.Add($"{Model.SegmentCount} segments");
        if (Model.EntityCount > 0) tooltipParts.Add($"{Model.EntityCount} entities");
        if (Model.TableCount > 0) tooltipParts.Add($"{Model.TableCount} tables");
        var tooltip = string.Join(", ", tooltipParts);
        <span class="badge badge-success badge-xs" title="@tooltip">
            Ready
            @if (Model.TableCount > 0)
            {
                <span class="ml-1 opacity-75">ðŸ“Š@Model.TableCount</span>
            }
        </span>
        break;

    case DocumentStatus.Processing:
        <span class="badge badge-warning badge-xs flex items-center gap-1"
              hx-get="/documents/@Model.Id/status-badge"
              hx-trigger="every 2s"
              hx-swap="outerHTML">
            <span class="loading loading-spinner loading-xs"></span>
            @Model.ProcessingProgress.ToString("0")%
        </span>
        break;

    case DocumentStatus.Pending:
        <span class="badge badge-info badge-xs"
              hx-get="/documents/@Model.Id/status-badge"
              hx-trigger="every 2s"
              hx-swap="outerHTML">
            Pending
        </span>
        break;

    case DocumentStatus.Failed:
        <span class="badge badge-error badge-xs" title="@Model.StatusMessage">Failed</span>
        break;
}
